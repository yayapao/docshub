---
title: Software Publications
authors: y
slug: software
tags: [software]
---

该 post 用来记录软著编写过程中的通用话术。

<!--truncate-->

## 编写目的

本文编写的主要目的，是以介绍**系统名称**设计实现内容为主。本文在忠实记录**系统名称**设计框架及细节的同时，也力求让读者可以对**系统名称**设计及实现构架建立起一个全面的认识和了解。

## 项目背景

:::info

交代项目背景，包括业内现状、存在问题、项目目的以及可行性解决方案。

:::

通过调研,团队发现公司内部没有针对**描述现状**的成熟解决方案。着互联网技术的飞速发展，市场对**描述系统功能**提出了更高的要求。**描述当前存在问题**。为此，我们团队提出了**系统名称**来解决此类重难卡点。**描述可行性方案**。

## 平台简介

**系统名称**一种**系统描述**的系统设计。能够**实现效果**。

## 系统特色

:::info

系统特色一般包括系统的功能特色、技术特色、性能特色、安全特色、可靠性特色、易用性特色、可维护性特色、可扩展性特色、可移植性特色等。挑选其中三点编写即可。

:::

### 全视角掌握

1. 鸟瞰整个开发链路，从应用生命周期的角度进行关联，对用户态运行时异常进行源码追溯，打通真实用户态到开发侧，这对团队提升开发效能尤其关键；
2. 同时，通过系统定义的核心指标和用户自定义的上报指标以及系统关键信息，以更数字化的形式复原真实用户使用场景；
3. 打通托管仓库，对产生问题的内容块的 commit 记录进行查询、匹配，迅速定位到负责人和提交信息；

### 尽力而为的异常匹配

1. 根据真实错误堆栈信息进行对异常状态进行分层数据溯源，对整个执行上下文和堆栈信息全覆盖；
2. 寻找最优解，当前信息未能匹配时，会触发兜底策略，对历史版本或者相似文件内进行推断，寻找范围内最优解；

### 无心智负担，开箱即用

1. 无需复杂的操作和晦涩难懂的脚本，只需在系统内进行简单点击，就能迅速定位到在用户态产生异常状态的问题根源；
2. 内容可读性展示，匹配不同产品线的系统内上报事件，对真实用户态的执行堆栈和溯源代码块进行展示；
3. 结合公司内实际开发、使用经验，对系统内展示内容表达进行规范化处理，减少用户的理解成本；

### 优雅的可视化设计

1. 结合丰富的可视化实践经验，定制关键路径展示和排障的交互设计，遵从可视化原则；
2. 支持折线图、饼图以及拓扑图等多种图表类型，针对不同的表达需求进行择优展示，高度定制化组件渲染，减少展示内容的交互需要，最大程度直接地向用户清晰地表达信息；
3. 功能分区，集中同质交互区域，区分交互区域和展示区域，提升平台易用性，优化用户操作流程；

### 专业的数据分析

1. 通过数据集管理海量数据，支持数据过滤、聚类、回归，帮助实现同一份数据的多维度分析；
2. 制定统一标准，对跨端、跨框架、跨语言的上报内容进行标准化处理，保证输入输出的数据质量，实现全链路数据打通；
3. 海量时序数据实时存储和分析，以服务为维度建立调用关系与调用指标关联，帮助用户快速了解服务运行情况；

## 需求概述

:::info

需求概述属于系统设计模块，用来表达系统需要解决的问题，以及对应解决方案简述。一般写 3-4 组即可。

:::

### 内容直观表达的需求

对于一个成熟的产品来说，如何将处理后的关键数据，通过高度定制化的交互和 UI 设计，清晰地向用户进行直观、可读性地表达，是需要重点关注的模块。为此，我们在平台内大量定制了可视化内容区域，在可视化表达内嵌多种直接交互，帮助用户快速阅读、定位、管理平台内容。

### 数据链路稳定性需求

对于服务的数据链路，我们需要从数据采集、处理链路以及服务查询方面保障系统的稳定性，通过充分利用队列设计模式，对服务进行拆分，保证单一指责原则，同时将大的处理器拆分成细微的处理单元，保障各个处理单元的可伸缩性，以进一步提升性能瓶颈，保证服务的稳定和响应速度。

### **系统术语**上报需求

各个产品线的开发者需要能够感知到应用**系统指标**。为此，我们提供多语言框架的 SDK，帮助开发者发现**系统指标**信息，并在处理后进行上报。同时，**补充信息**。

### 用户态场景数据关联需求

对于问题定位来说，尤其是在复杂的客户端环境，仅仅知道发生了什么是不够的，我们需要更多的信息来尽可能还原场景，也就是“时间胶囊”。为此，我们会对异常状态前后的信息以数字化的方式进行处理，并以指标数据的方式进行上报，尽可能提供更多的信息来支持开发者快速解决问题。

### 内容可视化和可读性需求

- 对于一个平台来说，仅仅有服务侧的数据处理是不够的，需要在用户侧进行交互设计来更好地将表达内容进行可读性展示。为此，我们设计了**系统模块**模块，帮助平台用户能够快读阅读、定位、复现异常场景。

- 对于一个可视化内容平台来说，需要在用户侧提供足够优质的可视化表达和交互设计，帮助用户能够快速地阅并读理解表达信息。为此，我们设计了事务细节分析模块，以时序的形式展示各个环节事件的基础信息，并支持细节查看，帮助平台用户能够快读阅读事件发展流程，提升处理效率。

### 数据统计和分析需求

在**系统名称**内，我们将服务视为一等公民，以它为视角统计时间段内的错误类型分布和错误数量的时序展示。同时我们会发掘服务之间的调用关系，查看服务于服务、服务与存储之间的调用情况，形成链路拓扑并将其在平台内进行展示。

## 系统架构设计描述

:::info

结合架构图对系统架构的特点进行描述。一般 5-6 点即可。

:::

### 采集数据

提供 SDK 在客户端侧采集、处理和上报指标数据，服务端接受数据上报，处理后写入数据库。

### 数据加工

- 上报时处理，对请求状态、结果进行预聚合，上报计算后结果，服务将其写入时序数据库。当用户发起请求时，根据组合条件内的时间范围参数，对其进行解析、设置合适步长，形成适合的聚合条件，从数据库内查询请求结果
- 基于 MySQL 和 ClickHouse 的底层数据服务，将事务类型数据和分析类型数据进行分类存储，分别对应系统内的查询展示模块和数据分析模块，充分利用不同数据的特性和能力，达到最优的查询效果。

### 数据缓存

- 基于 redis 底层数据服务，设计实现缓存系统，按照合适的策略对用户请求和数据进行缓存，提升服务性能，避免重复计算，进一步减轻服务的性能消耗，达到毫秒级响应。
- 在匹配到对应索引文件和原文件后，将其缓存在 redis/memcache，从而避免服务端每次匹配的性能消耗，因为用户每次观察的内容 95% 以上同质同源。

### 基于队列设计

结合 redis/kafka 队列服务，将数据处理任务进行分派和排队，保证服务高并发下的稳定性。

## 使用模块说明

### 模块模版

:::info

每个模块需要一个截图，文字内容用来解释截图的内容。

:::

1. 一句话概括截图内容，比如**在 XXX 模块，展示 XXX 内容，用户可以通过 XXX 方式进行交互**；
2. 结合用户交互，逐条展示页面和服务端的交互逻辑和数据走向；
3. 附图/图片名称；

举个例子：

展示边缘节点信息

在边缘节点信息页面，将展示服务与服务之间，不同接口的调用关系。用户将围绕服务、服务关系进行交互。系统在采集并持久化服务关系数据后，我们在系统上具备了围绕服务与服务之间调用关系详细信息的表达能力。
一、在链路拓扑画布上，用户单击指定边缘，系统收到用户的交互动作后，收集当前边缘节点信息，在程序内对数据进行处理后向服务端发起资源请求；
二、服务端在接收到客户端资源查询请求后，首先提取 cookie 以验证用户信息，通过后，提取查询参数，进行相应处理后，向数据服务层发起查询请求，数据服务会优先匹配缓存数据，如果未匹配到，会进一步去底层数据库内查询数据并同步更新缓存；
三、客户端接收服务侧响应，根据返回数据在视窗顶层渲染一块区域，用来展示当前服务与服务之间调用的详细信息；包括调用次数、调用时间、调用结果、调用参数等信息。
