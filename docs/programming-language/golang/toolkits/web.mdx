---
id: web
title: ''
sidebar_label: web
---

import { DocsHeader } from '/src/components/Layout/DocsHeader'
import { HighlightWithText } from '/src/components/Highlights'

<DocsHeader
  title="WebAPP"
  description="Start a webapp."
  github=""
  tags={['web']}
  links={[
    {
      label: 'How to cross-compile Go programs for Windows, Linux and MacOS.',
      link: 'https://freshman.tech/snippets/go/cross-compile-go-programs/',
    },
  ]}
/>{' '}

## 设置环境变量

不同场景启动应用：

```bash
# 开发环境
APP_ENV=development go run main.go

# 生产环境
APP_ENV=production ./main.go
```

在代码内获取当前环境变量：

```go
// 如果没有找到会返回空字符串
env := os.Getenv("APP_ENV")
```

## Compile and build

:::tips CROSS-COMPILE

How do you build Go binaries that target operating systems and architectures other than your own? This is called cross-compiling.

:::

通过 `go env` 查看编译的环境变量，我们可以观察到本地的系统架构和目标（Host）的目标架构。Go 支持通过更改 `GOHOSTARCH` 和 `GOHOSTOS` 来编译指定环境的二进制包。

```bash
$ go env

# output
GOARCH="amd64" # 64-bit architecture
GOHOSTARCH="amd64"
GOHOSTOS="darwin"
GOOS="darwin"
```

### MacOS

编译 MacOS 下二进制应用，如果本地使用 MacOS 开发，则直接 `go build` 即可。

```bash
# 64-bits
GOOS=darwin GOARCH=amd64 go build app.go

# 32-bits
GOOS=darwin GOARCH=386 go build app.go
```

### Linux

编辑 Lunix 下二进制应用。

```bash
# 64-bit
GOOS=linux GOARCH=amd64 go build app.go

# 32-bit
GOOS=linux GOARCH=386 go build app.go
```

### Windows

编译 `.exe` 应用：

```bash
# 64-bits
GOOS=windows GOARCH=amd64 go build app.go

# 32-bits
GOOS=windows GOARCH=386 go build app.go
```
