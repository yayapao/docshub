---
id: npm
title: ''
sidebar_label: npm
---

import { DocsHeader } from '/src/components/Layout/DocsHeader'
import {
  HighlightWithCode,
  HighlightWithText,
} from '/src/components/Highlights/TextContent'
import { SolutionCard } from '/src/components/Highlights/SolutionCard'
import { ResolvedTag } from '/src/components/Highlights/CustomizedTag'

<DocsHeader
  title="NPM Guidebook"
  description="NPMï¼Œå³ npm package managerï¼ŒNode.js çš„åŒ…ç®¡ç†å·¥å…·ã€‚å®ƒç”± npm-cli å’Œ npm registry ä¸¤éƒ¨åˆ†ç»„æˆã€‚"
  tags={['Node.js']}
  github="https://github.com/npm/cli"
  links={[
    {
      label: `what's npm?`,
      link: 'https://www.npmjs.com/about',
    },
    {
      label: `npm-run-script`,
      link: 'https://docs.npmjs.com/cli/v8/commands/npm-run-script',
    },
    {
      label: 'Selective dependency resolutions',
      link: 'https://classic.yarnpkg.com/lang/en/docs/selective-version-resolutions/',
    },
  ]}
/>{' '}

## What is npx?

:::info In a nutshell

NPM is used as a package manager, NPX, on the other hand, is used to execute Javascript packages.

:::

NPX, å³ _Node Package eXecuter_ï¼Œå®ƒç”¨æ¥æ‰§è¡Œ NPM packageã€‚**å®ƒçš„ä½¿ç”¨åœºæ™¯ï¼šå½“ä½ éœ€è¦ä¸´æ—¶æ‰§è¡ŒæŸä¸ª NPM packageï¼Œä½¿ç”¨ NPX æ‰§è¡ŒæŒ‡å®šå†…å®¹ï¼Œå¹¶åœ¨å®Œæˆå NPX ä¼šè‡ªåŠ¨åˆ é™¤ packageã€‚**æ¯”å¦‚åœ¨ä½¿ç”¨ `create-react-app` è¿™ç±» cli æ—¶ï¼ŒNPX èƒ½å¤Ÿæä¾›ä¾¿åˆ©ã€‚

### NPX çš„æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ

åœ¨ç”¨æˆ·æ‰§è¡Œ `npx [script]` æ—¶ï¼ŒNPX ä¼šç»å†å¦‚ä¸‹å¤„ç†æµç¨‹ï¼š

- å°† `npx` æ›¿æ¢ä¸º `npm exec`ï¼Œå¯¹å‚æ•°è¿›è¡Œè§£æã€è¿‡æ»¤ã€æ’åºï¼Œå¹¶å¯¹å½“å‰æ‰§è¡Œç¯å¢ƒè¿›è¡Œæ ¡éªŒ
- å¦‚æœæ²¡æœ‰æ˜¾å¼ä¼ å…¥ packageï¼Œæ¯”å¦‚ `npx ./[script].js`ï¼Œåˆ™ä¾æ¬¡åˆ¤æ–­ local -> global æ˜¯å¦å­˜åœ¨å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå­˜åœ¨åˆ™è·å–å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•
- å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å°†å…¶å½“ä½œ package å¯¹å¾…ï¼Œå¹¶å®‰è£… package åˆ°ç¼“å­˜ç›®å½•ï¼Œå°† `${installDir}/node_modules/.bin` å†™å…¥å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•
- æ ¹æ®è·¯å¾„æ•°ç»„æ‰¾åˆ°å¯æ‰§è¡Œæ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œæ‰§è¡Œå®Œæ¯•ååˆ é™¤ä¸´æ—¶æ¨¡å—

è¿™é‡Œå±•ç¤ºæ‰§è¡Œ `npx X` çš„å¤§è‡´æµç¨‹ï¼š

![npx-cli-processor.png](https://img.joyjoy.cc/nodejs/npx-cli-processor.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç›´æ¥ä»æºç ä¸€æ¢ç«¯å€ªã€‚

```js
// run the resulting command as `npm exec ...args`
process.argv[1] = require.resolve('./npm-cli.js')
process.argv.splice(2, 0, 'exec')
```

åœ¨ _npm/cli bin/npx-cli.js_ å†…ï¼Œå°† `npx X` è½¬æ¢ä¸º `npm exec X`

```js
// 1
const needPackageCommandSwap = args.length && !packages.length
if (needPackageCommandSwap) {
  let binExists = false
  const dir = dirname(dirname(localBin))
  const localBinPath = await localFileExists(dir, args[0])
  if (localBinPath) {
    pathArr.unshift(localBinPath)
    binExists = true
  } else if (await fileExists(`${globalBin}/${args[0]}`)) {
    pathArr.unshift(globalBin)
    binExists = true
  }

  if (binExists) return await _run()

  packages.push(args[0])
}

// 2
const manis = await Promise.all(
  packages.map(async (p) => {
    const spec = npa(p, path)
    if (spec.type === 'tag' && spec.rawSpec === '') {
      try {
        const pj = resolve(path, 'node_modules', spec.name, 'package.json')
        return await readPackageJson(pj)
      } catch (er) {}
    }
    return await pacote.manifest(p, {
      ...flatOptions,
      preferOnline: true,
    })
  })
)

// 3
if (needInstall) {
  const { npxCache } = flatOptions
  const installDir = cacheInstallDir({ npxCache, packages })
  await mkdirp(installDir)
  // ...
}
```

åœ¨ _npm/libnpmexec lib/index.js_ å†…ï¼š

1. å¦‚æœæ²¡æœ‰æ˜¾å¼ä¼ å…¥ packageï¼Œåˆ™ä¾æ¬¡ä»æœ¬åœ°/å…¨å±€çš„ bin è·¯å¾„ä¸‹å¯»æ‰¾å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™å°†å•ä¸ªä¼ å€¼å½“ä½œ package ç»§ç»­å¤„ç†ï¼›
2. è¿™é‡Œä¼šå°† package ä¸æœ¬åœ°çš„ package.json æ–‡ä»¶å†…çš„ deps è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœå­˜åœ¨ `X@latest` è¿™ç§ï¼Œåˆ™ X ä¸éœ€è¦é‡æ–°å®‰è£…ï¼Œä½¿ç”¨æœ¬åœ°çš„å³å¯ï¼›
3. å¦‚æœå­˜åœ¨ package éœ€è¦ä»ç½‘ä¸Šæ‹‰å–ï¼ˆé€šè¿‡ `add.length` è¿›è¡Œåˆ¤æ–­ï¼‰ï¼Œåˆ™åˆ›å»ºä¸´æ—¶ç¼“å­˜ç›®å½•ï¼Œå°† package è¿›è¡Œæ‹‰å–ã€ç¼“å­˜ï¼Œå¹¶å°†ç¼“å­˜ç›®å½•çš„ bin ç›®å½•ï¼Œå†™å…¥ pathArrï¼›

## æ‰§è¡Œ `npm run [script]` çš„è¿‡ç¨‹ï¼Ÿ

`npm run` æ˜¯ `npm run-scripts` çš„ä»£ç§°ï¼Œç”¨æ¥æ‰§è¡Œ package.json å†… `scripts` å­—æ®µæ‰€å¯¹åº”çš„è„šæœ¬ã€‚

é‚£ä¹ˆå½“æˆ‘ä»¬åœ¨æ‰§è¡Œ `npm run X` æ—¶ï¼Œå®é™…å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

**In a nutshellï¼š`npm run` çš„æœ¬è´¨æ˜¯æ‰§è¡Œè„šæœ¬ï¼Œå¹¶ä¸” npm å¤„ç†äº†å¯»æ‰¾å¯æ‰§è¡Œè„šæœ¬çš„è¿‡ç¨‹ã€‚**

ä¸¾ä¸ªä¾‹å­ ğŸ‘‡

```json

"scripts": {
  "dev": "umi dev",
},

```

å½“æ‰§è¡Œ `npm run dev` æ—¶ï¼Œnpm ä¼šå…ˆåœ¨ **æœ¬åœ° `node_modules/.bin`ç›®å½•ä¸‹æ‰¾å¯» `umi` å‘½ä»¤**ï¼Œæ‰¾åˆ°ä¹‹åç«‹å³æ‰§è¡Œï¼Œç›¸å½“äº `node_modules/.bin umi dev`ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œä¼šåœ¨å…¨å±€å®‰è£…çš„ node_modules å†…ç»§ç»­å¯»æ‰¾ã€‚

`node_modules/.bin` å†…å­˜æ”¾çš„å®é™…ä¸Šæ˜¯å„ä¸ªæ‰§è¡Œè„šæœ¬çš„è½¯é“¾æ¥ï¼ˆSymbolic linkï¼‰ï¼Œ`umi` å®é™…æŒ‡å‘ `node_modules/umi/bin/umi.js`

- è¿™é‡Œçš„å®é™…æŒ‡å‘è·¯å¾„ç”± **node_modules/umi/package.json** çš„ `bin` é…ç½®å†³å®š
- å½“æ‰§è¡Œ `npm install umi` æ—¶ï¼Œnpm ä¼šè¯»å– umi å†…çš„ `bin` å£°æ˜ï¼Œå¹¶å°†ç›¸åº”æ–‡ä»¶ï¼ˆè¿™é‡ŒæŒ‡ `node_modules/umi/bin/umi.js`ï¼‰è½¯é“¾æ¥åˆ° `node_modules/.bin` ç›®å½•ä¸‹
- åŒæ—¶ï¼Œnpm ä¼šå°† `node_modules/.bin` åŠ å…¥åˆ° **$PATH**ï¼Œä»è€Œå¯ä»¥ç›´æ¥ä½œä¸ºå‘½ä»¤è¿è¡Œä¾èµ–ç¨‹åºå’Œå¼€å‘ä¾èµ–ç¨‹åº

## ç®¡ç†å¹¶å‘å¸ƒ NPM package

åˆ›å»º npm è´¦å·ï¼Œå¹¶ä¸”å¯ä»¥[åˆ›å»º npm ç»„ç»‡](https://www.npmjs.com/org/create)

1. ç¡®è®¤ä»“åº“åœ°å€

```bash
# æŸ¥çœ‹å½“å‰ä»“åº“åœ°å€
npm config get registry

# æ›´æ¢ä»“åº“åœ°å€
npm config set registry https://registry.npmjs.org/

# æ‹‰å–ä¾èµ–æ—¶ä¸´æ—¶æ›´æ¢ä»“åº“åœ°å€
npm --registry https://registry.npmjs.org/ install [package]
```

2. å‘å¸ƒæµç¨‹ï¼Œcli å·¥å…·å¯ä»¥æŒ‰éœ€é€‰æ‹©ï¼Œæ¯”å¦‚ npmã€pnpm ç­‰

```bash
# ç™»å½• npm accountï¼Œä¸€èˆ¬ç™»å½•åï¼Œæ— éœ€é‡å¤ç™»å½•
npm login

# åœ¨æœ¬åœ°æ‰“åŒ…å®Œæ¯•ä¹‹åï¼Œæ”¹å˜ versionï¼Œéµå¾ª semver è§„èŒƒ
npm version [version]

# æäº¤ï¼Œ`pnpm publish --no-git-checks` èƒ½å¤Ÿå¿½ç•¥æäº¤å‰æ£€æŸ¥
npm publish
```

### npm publish æŒ‡å®šæ–‡ä»¶ï¼ˆæˆ–è€…æŒ‡å®šä¸å‘å¸ƒçš„æ–‡ä»¶ï¼‰

å¼€å§‹åœ¨ä½¿ç”¨ npm è¿›è¡Œå‘å¸ƒæ—¶ï¼Œä¼šå‘ç°æ€»æ˜¯å°†ä¸€äº›ä¸éœ€è¦çš„æ–‡ä»¶æ‰“åŒ…è¿›å»ï¼Œå¯ä»¥é€šè¿‡å‘å¸ƒæ—¶çš„ `Tarball Contents` æ¥è§‚å¯Ÿæ‰“åŒ…æ–‡ä»¶ï¼Œæˆ–è€…åœ¨ [npm](https://www.npmjs.com/) å†…é€šè¿‡ Total Files è¿›è¡ŒæŸ¥çœ‹

![npm-tarball.png](https://img.joyjoy.cc/nodejs/npm-tarball.png)

#### ä¼˜åŒ– package size ?

ä¸¤ä¸ªæ€è·¯ï¼š

**1. å‡å°‘ä¸å¿…è¦æ–‡ä»¶**

- è®¾ç½® `.gitignore` ï¼Œåœ¨ git ä»£ç ç®¡ç†å’Œ npm publish å†…åŒæ—¶ç”Ÿæ•ˆï¼›
- è®¾ç½® `.npmignore` ï¼Œå…¶è®¾ç½®è¯­æ³•å’Œ `.gitignore` ä¸€è‡´ï¼Œä½†æ˜¯**ä¼˜å…ˆçº§æ›´é«˜ï¼**
- è®¾ç½® `package.json` å†…çš„ [files](https://docs.npmjs.com/cli/v7/configuring-npm/package-json#files) å­—æ®µæ¥é€‰æ‹©å‘å¸ƒçš„æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œå…¶ä¼˜å…ˆçº§åœ¨åŒçº§ç›®å½•ä¸‹æ—¶æ›´é«˜ï¼

**2. åœ¨æ‰“åŒ…æ—¶ï¼Œé€šè¿‡æ„å»ºå·¥å…·å‹ç¼©ä»£ç å†…å®¹**

### npm-cli å¸¸ç”¨å‘½ä»¤

**æŸ¥çœ‹**

```bash
# æŸ¥çœ‹å…¨å±€å®‰è£…åŒ…
npm ls -g --depth 0

# æ£€ç´¢æœ¬åœ°/å…¨å±€æ˜¯å¦å®‰è£…æŒ‡å®šåŒ…
npm ls [package name] [-g]

# æŸ¥çœ‹ npm å…¨å±€åŒ…å®‰è£…è·¯å¾„
npm get prefix
```

**âš ï¸ ä½¿ç”¨ volta ç®¡ç† Node.js æ—¶ï¼Œå…¶å®‰è£…è·¯å¾„åœ¨ `../packages` ç›®å½•ä¸‹**

åŸºäº npm prefix çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°å¼€å‘ç­‰åœºæ™¯ä¸‹ï¼ŒæŒ‡å®šå¯æ‰§è¡Œè„šæœ¬çš„ä½ç½®ã€‚npm é»˜è®¤æ‰§è¡Œæ ¹ç›®å½•ä¸‹ package.json å†…çš„å‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡é…ç½® `npm --prefix /path/to/project run build` æ¥æŒ‡å®šè„šæœ¬ä½ç½® ï¼Œå…¶ä¸­ /path/to/project è¡¨ç¤ºæŒ‡å®šç›®å½•ï¼Œå…¶ç›®å½•ä¸‹å¿…é¡»åŒ…å« `package.json`

## package.json

package.json è¦ç‚¹

![package](/img/server/package.json.png)

### devDependencies vs dependencies

<SolutionCard
  tag="åœºæ™¯ä¸€"
  title="æ— è®ºæˆ‘å°† package æ”¾åœ¨ devDependencies è¿˜æ˜¯ dependencies å†…ï¼Œæœ€ç»ˆæ‰“åŒ…äº§ç‰©å†…å‡èƒ½æ‰¾è¯¥ package"
/>{' '}

<SolutionCard
  tag="åœºæ™¯äºŒ"
  title="æ‰§è¡Œ `npm install --save-dev`, `npm install --save`, `npm install` çš„äº§ç‰©æ²¡æœ‰åŒºåˆ«"
/>{' '}

å®é™…ä¸Šï¼Œåœ¨é€šè¿‡ webpack ç­‰å·¥å…·è¿›è¡Œæ‰“åŒ…æ—¶ï¼Œdependencies å’Œ devDependencies ä»…å­˜åœ¨è¯­ä¹‰ä¸Šçš„å·®åˆ«ã€‚**æ‰“åŒ…å·¥å…·ä¼šæ ¹æ®å…¥å£æ–‡ä»¶çš„å¼•ç”¨æ ‘æ¥ç”Ÿæˆæ„å»ºå†…å®¹ï¼Œä¸ package æ”¾åœ¨å“ªä¸ªå­—æ®µæ— å…³ï¼Œåªè¦è¯¥ package è¢«å¼•ç”¨å¹¶å­˜åœ¨äº node_modules å†…ï¼Œå°±ä¼šè¢«æ‰“åŒ…åˆ°æœ€ç»ˆäº§ç‰©ã€‚**

é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆ NPM è¿˜è¦æ”¯æŒé€šè¿‡ä¸åŒå‚æ•°å°† package å¯¹åº”åˆ°ä¸åŒå­—æ®µå‘¢ï¼Ÿ

ä¸»è¦åŸå› æ˜¯ä¸ºäº†åœ¨å¼€å‘ package æ—¶åšåŒºåˆ†ï¼Œæˆ‘ä»¬æ‹‰å–çº¿ä¸Š package æ—¶ä¹Ÿä¼šé“¾å¼æ‹‰å– package ä¾èµ–ã€‚é€šå¸¸ NPM ä¼šè‡ªåŠ¨å®‰è£… dependencies å’Œ devDependencies å¯¹åº”çš„ä¾èµ–åŒ…ï¼Œä½†æ˜¯å¦‚æœç”¨æˆ·æ‰§è¡Œ `npm install --production` åˆ™ä»…ä¼šå®‰è£… dependencies å¯¹åº”çš„ packageã€‚

## How to manage Dependencies?

### `ncu` å‡çº§ä¾èµ–

é€šè¿‡ `yarn upgrade | upgrade-interactive` å‡çº§ä¾èµ–ç‰ˆæœ¬æ—¶ï¼Œä»…ä¼šæ›´æ–° _yarn.lock_ æ–‡ä»¶ï¼Œ_package.json_ å¹¶ä¸ä¼šè¢«æ›´æ–°ï¼Œä¸ºäº†è§£å†³æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬é€‰æ‹©ç¤¾åŒºè§£å†³æ–¹æ¡ˆ - [npm-check-updates](https://www.npmjs.com/package/npm-check-updates)

```bash
# æ£€æŸ¥æ‰€æœ‰ä¾èµ–ï¼Œæ›´æ–° package.json æ–‡ä»¶ï¼Œä¹‹åæ‰§è¡Œ `yarn install` æ›´æ–°ä¾èµ–
ncu -u

# å‡çº§æŒ‡å®šæ–‡ä»¶
ncu -f @tanstack/react-query -u
```

### `yarn resolution` æ¥ç®¡ç†åŒ…çš„ä¾èµ–åŒ…ç‰ˆæœ¬

é€šä¿—æ¥è¯´ï¼Œå°±æ˜¯æˆ‘ä»¬é€šè¿‡ `yarn add` å¼•å…¥çš„ä¾èµ–åŒ…å†…å¯èƒ½åŒæ—¶ä¾èµ–å…¶ä»–åŒ…ï¼ˆå³**æ¬¡çº§ä¾èµ–åŒ…**ï¼‰ï¼Œå¦‚æœåœ¨ä¾èµ–åŒ…å†…æ²¡æœ‰æŒ‡å®šç‰ˆæœ¬çš„è¯ï¼Œé»˜è®¤ä¼šæ‹‰å–å…¶æœ€æ–°ç‰ˆæœ¬ï¼Œè¿™æ ·åšä¼šäº§ç”Ÿé—®é¢˜ï¼Œå› ä¸º yarn é€šè¿‡æ”¯æŒ `resolutions` å­—æ®µæ¥æ˜¾å¼æŒ‡å®šä¾èµ–åŒ…çš„ç‰ˆæœ¬ï¼ˆä¹‹å‰ä¼šæ›´æ”¹ yarn.lock æ–‡ä»¶ï¼‰

**ä¸ºä»€ä¹ˆéœ€è¦ resolutions å‚æ•°ï¼Ÿ**

- ç›´æ¥ä¾èµ–çš„åŒ…å¯èƒ½ä¸é¢‘ç¹æ›´æ–°ï¼Œä½†æ˜¯æ¬¡çº§ä¾èµ–åŒ…å¯èƒ½å‘å¸ƒäº†ä¸€ä¸ªé‡å¤§æ›´æ–°ï¼Œæ­¤æ—¶ä½ å¯èƒ½éœ€è¦ç­‰å¾…ä½œè€…å»å¤„ç†åå‘å¸ƒ
- æ¬¡çº§ä¾èµ–åŒ…æš´éœ²å‡ºä¸€ä¸ªé‡å¤§çš„å®‰å…¨æ¼æ´
- æ¬¡çº§ä¾èµ–åŒ…å’Œå½“å‰å…¶ä»–ç›´æ¥ä¾èµ–ä¸å…¼å®¹ï¼Œéœ€è¦å°†æ¬¡çº§ä¾èµ–åŒ…å›é€€

**ä¸¾ä¸ªä¾‹å­**

`NPM package cannot be used as a JSX Component - Type errors` åœ¨ React v17 åˆ° v18 å†…å¸¸è§é—®é¢˜ã€‚

åŸå› æ˜¯ `@types/react-dom` å†…ä¾èµ– `@types/react` å¹¶å°†å…¶ç‰ˆæœ¬è®¾ç½®ä¸º \*ï¼Œè¿™å°±ä¼šå¯¼è‡´ï¼Œå³ä½¿ `@types/react-dom` æ‹‰å–çš„ç‰ˆæœ¬æ˜¯ v17ï¼Œä½†æ˜¯æ‹‰å–çš„ `@types/react` ä¸º v18ï¼Œä»è€Œé€ æˆä¸Šè¯‰é—®é¢˜ã€‚

è§£å†³æ–¹æ¡ˆæ˜¯åœ¨ package.json å†…è®¾ç½®ï¼ˆæ ¹æ®å®é™…æƒ…å†µçµæ´»è®¾ç½®ï¼‰ï¼š

```json
"resolutions": {
  "@types/react": "17.0.0",
  "@types/react-dom": "17.0.0"
}
```

## Troubleshooting

### Could not find a declaration file for module 'module-name'.

<SolutionCard
  tag="åœºæ™¯"
  title="åœ¨é¡¹ç›®å†…å¼•ç”¨ package åï¼Œ.ts(.tsx) æ–‡ä»¶å†…å‡ºç°ä¸Šè¿°é”™è¯¯ï¼Œå³ typescript æ— æ³•æ‰¾åˆ°ç±»å‹å®šä¹‰æ–‡ä»¶å…¥å£"
/>{' '}

ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼š

1. å¦‚æœæ˜¯å…¬ç”¨åŒ…ï¼Œåˆ™åœ¨ npm å¯»æ‰¾ `@types/[package]`ï¼›
2. å¦‚æœæ˜¯è‡ªå·±ç»´æŠ¤çš„åŒ…ï¼Œåˆ™æ£€æŸ¥ `package.json [typings]` æ˜¯å¦æŒ‡å®šäº†ç±»å‹å®šä¹‰æ–‡ä»¶å…¥å£ï¼›

### bad interpreter: No such file or directory

<SolutionCard
  tag="åœºæ™¯"
  title="å‘å¸ƒç»´æŠ¤çš„ cli package åï¼Œæ‰§è¡Œäº§ç”Ÿä¸Šè¿°æŠ¥é”™ï¼ŒåŸå› æ˜¯ è„šæœ¬æ–‡ä»¶çš„ shell å£°æ˜é”™è¯¯"
/>{' '}

éœ€è¦æ£€æŸ¥ shell çš„å¤´éƒ¨å£°æ˜ï¼Œæ³¨æ„ shell çš„æ‰§è¡Œè·¯å¾„ï¼š

```js
// error declare
#!usr/bin/env node

// correct declare
#!/usr/bin/env node
```

### sill install loadIdealTree

<HighlightWithText>
  Q: å®‰è£… pm2 æ—¶ï¼Œnpm install å¡åœ¨ sill install loadIdealTreeï¼Ÿ
</HighlightWithText>{' '}

```
1. æ›´æ¢ npm æº `https://registry.npm.taobao.org/`
2. åˆ é™¤ package-lock.json, node_modules åï¼Œé‡æ–°å®‰è£…
```

### Hostname/IP address doesn't match

<HighlightWithText>
  Q: NPM not installing package. Hostname/IP address doesn't match certificate's
  altnames?
</HighlightWithText>{' '}

å‚è€ƒ [NPM not installing package. Hostname/IP address doesn't match certificate's altnames?](https://stackoverflow.com/questions/52128212/npm-not-installing-package-hostname-ip-address-doesnt-match-certificates-altn)ï¼Œé—®é¢˜åœ¨äºå½“å‰æ‹‰å–çš„ npm æºä¸å¯¹ã€‚

```shell
# è·å– www.npmjs.com ip
dig www.npmjs.com @1.1.1.1
# é…ç½® hosts æ–‡ä»¶
vim /etc/hosts

104.16.92.83 registry.npmjs.org

# æˆ–è€…æ›´æ¢æºï¼Œæ³¨æ„ http/https åŒºåˆ«
npm config set registry http://registry.npmjs.org
```
