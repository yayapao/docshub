---
id: sentry
title: ''
sidebar_label: start sentry
slug: sentry
---

import { DocsHeader } from '/src/components/Layout/DocsHeader'

<DocsHeader
  title="Sentry"
  description="Sentry 是我在研究前端可信赖工程的一个重要课题，它是一个 toB 商业化平台，能够支持应用在线上的错误追踪和性能监控，进而了解用户的真实使用情况。"
  github="https://github.com/getsentry/sentry"
  tags={['Error', 'Performance']}
  links={[
    {
      label: 'Sentry Product',
      link: 'https://docs.sentry.io/',
    },
    {
      label: 'Sentry Developer Docs',
      link: 'https://develop.sentry.dev/',
    },
    {
      label: '抓 Bug 神器的工作原理——聊聊 Sentry 的架构',
      link: 'https://mp.weixin.qq.com/s?__biz=MzIzNzUzMDMyMg==&mid=2247484709&idx=1&sn=c92c8875c4a4bc6ec3a389bca3ce0519&chksm=e8c67898dfb1f18e1e7ecf6a024c3100b370df3b44a0cba59c67864dae19f3b3c5923aebb480&mpshare=1&scene=1&srcid=0804EkTqdYUD83GTilZi21uK&sharer_sharetime=1628050462144&sharer_shareid=7ea829c266ade297fbf226905a62adfa&version=3.1.12.70057&platform=mac#rd'
    }
  ]}
/>

<!-- -->

我们在实践过程中，对 sentry 进行了深度的研究和改造，使其更加贴近实际业务。在这个过程中，我们着重思考：

- 如何私有化部署 Sentry?
- 如何理解 Sentry 架构
- 如何改造 Sentry SDK?
- 如何开发 Sentry server?
- 如何使用?
- 如何进行贴近业务的设计？

这里先对上述各个模块进行概述，后面继续对各个模块进行更加深入的思考和分析。

## How to self-hosted?

Sentry 提供了官方的私有化部署方案，即[self-hosted](https://github.com/getsentry/self-hosted)，它是一个 composed 的容器镜像，如果你仅需要本地跑或者接入少量项目时，它是足够的。

但是，如果你希望能够支撑更多的项目以及随之而来的并发请求，我更建议**对其服务进行拆分**，以获得扩展能力，同时提升服务稳定性，具体的操作是参考 self-hosted 的 docker.yaml 和启动脚本对 Sentry 各个服务单独进行部署。

通常而言，我们运行一个服务必须：运行时环境、源码（包含配置）、启动命令。Sentry 也不例外！

## What's architecture?

这里是 sentry 一个高度抽象的架构图，我们会在架构章节内对其每个服务内的数据流转进行拆解，并对扩展能力进行深入研究。

![sentry-architure](/img/fte/sentry_architure.png)

## How to contribute to SDK?

在使用过程中，我们会尝试对官方 SDK 进行扩展以支持内部的一些使用场景，比如内部的上报通道、动态控制的上报率等。这里我们更多地希望“授人以渔”，介绍 SDK 的组织形式以及开发方法。

## How to develop?

在环境准备完毕之后，紧接着我们需要将源项目克隆下来并在本地进行运行。

我们会介绍如何在本地运行 sentry 项目并创建第一个项目，同时也会对服务端的功能进行改造以满足我们的定制化需求。

## How to use?

在本章节，我们从一个用户的角度对 Sentry 平台进行深度体验，对其核心概念和使用方法进行文档化（因为 Sentry 本身并不支持中文文档），同时对其平台的亮点功能进行深度思考。

## How to get closer to application?

Sentry 官方平台更多地是提供针对应用的通用监控解决方案，但是在实际使用过程中，我们可能不同的应用存在不同的使用场景，这时就需要我们贴近业务场景来提供数据服务，比如业务告警、业务核心链路监控等。

同时，Sentry 在采集完错误信息后，需要我们依托内部实际情况对错误进行闭环，等等。

这些都需要根据内部的实际项目情况和基础建设来“对症下药”。
